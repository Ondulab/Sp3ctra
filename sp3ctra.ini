# Sp3ctra Configuration
# This file is the single source of truth for all parameter values, ranges, and MIDI scaling
# MIDI mappings (CC/NOTE assignments) are defined in midi_mapping.ini
# Modify these values as needed - the program will validate them on startup

#==============================================================================
# SYSTEM CONFIGURATION
#==============================================================================

# Global log level: ERROR, WARNING, INFO, DEBUG
Log_level = WARNING

#==============================================================================
# AUDIO SYSTEM (Real-Time Critical)
#==============================================================================

[audio]
# Audio system configuration - optimized for real-time synthesis
# Sampling frequency in Hz (48000, 96000)
sampling_frequency = 48000

# Audio buffer size in frames - affects latency and stability
# Smaller values = lower latency, larger values = more stable
audio_buffer_size = 128

[audio_global]
# Master output volume (0.0-1.0)
master_volume = 1.0
master_volume_min = 0.0
master_volume_max = 1.0
master_volume_scaling = linear

# Reverb Parameters
reverb_mix = 0.3
reverb_mix_min = 0.0
reverb_mix_max = 1.0
reverb_mix_scaling = linear

reverb_size = 0.5
reverb_size_min = 0.0
reverb_size_max = 1.0
reverb_size_scaling = linear

reverb_damp = 0.5
reverb_damp_min = 0.0
reverb_damp_max = 1.0
reverb_damp_scaling = linear

reverb_width = 1.0
reverb_width_min = 0.0
reverb_width_max = 1.0
reverb_width_scaling = linear

# EQ Parameters
eq_low_gain = 0.0
eq_low_gain_min = -12.0
eq_low_gain_max = 12.0
eq_low_gain_scaling = linear

eq_mid_gain = 0.0
eq_mid_gain_min = -12.0
eq_mid_gain_max = 12.0
eq_mid_gain_scaling = linear

eq_high_gain = 0.0
eq_high_gain_min = -12.0
eq_high_gain_max = 12.0
eq_high_gain_scaling = linear

eq_mid_freq = 1000.0
eq_mid_freq_min = 200.0
eq_mid_freq_max = 5000.0
eq_mid_freq_scaling = logarithmic

[auto_volume]
# IMU-based automatic volume control
# Enable/disable auto-volume (0=disabled, 1=enabled)
auto_volume_enabled = 0

# Timeout before switching to inactive mode (seconds)
imu_inactivity_timeout_s = 5

# Volume level when inactive (0.0-1.0)
auto_volume_inactive_level = 0.010

# Fade duration for volume transitions (ms)
auto_volume_fade_ms = 600

#==============================================================================
# SYNTHESIS COMMON PARAMETERS
#==============================================================================

[synthesis]
# Frequency range configuration
# These values define the musical range that will be mapped across the sensor
# Starting frequency in Hz (C2)
low_frequency = 65.41

# Ending frequency in Hz (~8 octaves above)
high_frequency = 16744.04

# Sensor DPI configuration (200 or 400)
# The system will automatically calculate the optimal resolution
sensor_dpi = 400

# Pixel to note mapping and intensity behavior
# 0=bright pixels louder, 1=dark pixels louder
invert_intensity = 1

#==============================================================================
# ADDITIVE SYNTHESIS PARAMETERS
#==============================================================================

[synth_additive]
# Mix level for additive synthesis (0.0-1.0)
volume = 1.0
volume_min = 0.0
volume_max = 1.0
volume_scaling = linear

# Reverb send amount (0.0-1.0)
reverb_send = 0.2
reverb_send_min = 0.0
reverb_send_max = 1.0
reverb_send_scaling = linear

# Envelope Parameters (MIDI-controllable)
# Base time constants for envelope slew (multiplied by runtime divisors)
envelope_tau_up_base_ms = 0.5
envelope_tau_up_base_ms_min = 0.001
envelope_tau_up_base_ms_max = 1000.0
envelope_tau_up_base_ms_scaling = exponential

envelope_tau_down_base_ms = 0.5
envelope_tau_down_base_ms_min = 0.001
envelope_tau_down_base_ms_max = 1000.0
envelope_tau_down_base_ms_scaling = exponential

# Frequency-dependent release weighting (stabilizes highs vs lows)
envelope_decay_freq_ref_hz = 440.0
envelope_decay_freq_ref_hz_min = 20.0
envelope_decay_freq_ref_hz_max = 20000.0
envelope_decay_freq_ref_hz_scaling = logarithmic

envelope_decay_freq_beta = -1.2
envelope_decay_freq_beta_min = -5.0
envelope_decay_freq_beta_max = 5.0
envelope_decay_freq_beta_scaling = linear

# Stereo Control (MIDI-controllable)
# Enable/disable stereo mode (0=mono, 1=stereo)
stereo_mode_enabled = 1
stereo_mode_enabled_min = 0.0
stereo_mode_enabled_max = 1.0
stereo_mode_enabled_scaling = discrete

[envelope_slew]
# DEPRECATED: These parameters have been moved to [synth_additive] for MIDI control
# Kept for backward compatibility with config_loader
# Base time constants for envelope slew (multiplied by runtime divisors)
tau_up_base_ms = 0.5
tau_down_base_ms = 0.5
decay_freq_ref_hz = 440.0
decay_freq_beta = -1.2

[stereo_processing]
# DEPRECATED: stereo_mode_enabled moved to [synth_additive] for MIDI control
# Kept for backward compatibility with config_loader
# Stereo imaging based on color temperature
stereo_mode_enabled = 1

# Controls global stereo intensity
stereo_temperature_amplification = 2.5

# Balance between color axes
stereo_blue_red_weight = 0.8
stereo_cyan_yellow_weight = 0.2

# Shape of response curve
stereo_temperature_curve_exponent = 1.0

[summation_normalization]
# Volume dynamics and compression
# Volume weighting exponent - LOWER values make strong oscillators dominate more
# Valid range: 0.01 to 10.0 (0.1 = strong domination, 1.0 = linear, 2.0+ = flattened)
volume_weighting_exponent = 0.1

# Final response curve exponent - HIGHER values = MORE compression
# Valid range: 0.1 to 3.0 (0.5 = expand, 1.0 = linear, 2.0+ = compress)
summation_response_exponent = 2.0

#==============================================================================
# PHOTOWAVE SYNTHESIS
#==============================================================================

[photowave]
# Photowave synthesis - transforms image lines into audio waveforms
# Continuous mode: 0=only on MIDI notes, 1=always generating
continuous_mode = 0

# Scanning mode: 0=Left to Right, 1=Right to Left, 2=Dual (ping-pong)
scan_mode = 2

# Interpolation mode: 0=Linear, 1=Cubic
interp_mode = 0

# Amplitude (0.0-1.0)
amplitude = 0.20

[synth_photowave]
# Mix level for photowave synthesis (0.0-1.0)
volume = 1.0
volume_min = 0.0
volume_max = 1.0
volume_scaling = linear

# Reverb send amount (0.0-1.0)
reverb_send = 0.2
reverb_send_min = 0.0
reverb_send_max = 1.0
reverb_send_scaling = linear

# Note control (MIDI-triggered)
note_on = 0.0
note_on_min = 0.0
note_on_max = 127.0
note_on_scaling = discrete
note_on_type = button

note_off = 0.0
note_off_min = 0.0
note_off_max = 127.0
note_off_scaling = discrete
note_off_type = button

# Pitch control (deprecated - use MIDI notes)
pitch = 60.0
pitch_min = 0.0
pitch_max = 127.0
pitch_scaling = linear

# Modulation (scan mode control)
modulation = 0.0
modulation_min = 0.0
modulation_max = 127.0
modulation_scaling = discrete

# Resonance (future feature)
resonance = 0.0
resonance_min = 0.0
resonance_max = 1.0
resonance_scaling = linear

# Brightness (interpolation mode)
brightness = 0.0
brightness_min = 0.0
brightness_max = 127.0
brightness_scaling = discrete

# Volume ADSR Envelope
volume_env_attack = 0.01
volume_env_attack_min = 0.001
volume_env_attack_max = 5.0
volume_env_attack_scaling = exponential

volume_env_decay = 0.1
volume_env_decay_min = 0.001
volume_env_decay_max = 5.0
volume_env_decay_scaling = exponential

volume_env_sustain = 0.8
volume_env_sustain_min = 0.0
volume_env_sustain_max = 1.0
volume_env_sustain_scaling = linear

volume_env_release = 0.2
volume_env_release_min = 0.001
volume_env_release_max = 10.0
volume_env_release_scaling = exponential

# Filter ADSR Envelope
filter_env_attack = 0.02
filter_env_attack_min = 0.001
filter_env_attack_max = 5.0
filter_env_attack_scaling = exponential

filter_env_decay = 0.2
filter_env_decay_min = 0.001
filter_env_decay_max = 5.0
filter_env_decay_scaling = exponential

filter_env_sustain = 0.3
filter_env_sustain_min = 0.0
filter_env_sustain_max = 1.0
filter_env_sustain_scaling = linear

filter_env_release = 0.3
filter_env_release_min = 0.001
filter_env_release_max = 10.0
filter_env_release_scaling = exponential

# LFO Vibrato
lfo_vibrato_rate = 5.0
lfo_vibrato_rate_min = 0.0
lfo_vibrato_rate_max = 20.0
lfo_vibrato_rate_scaling = linear

lfo_vibrato_depth = 0.25
lfo_vibrato_depth_min = 0.0
lfo_vibrato_depth_max = 2.0
lfo_vibrato_depth_scaling = linear

# Filter Parameters
filter_cutoff = 12000.0
filter_cutoff_min = 100.0
filter_cutoff_max = 12000.0
filter_cutoff_scaling = logarithmic

filter_env_depth = -6000.0
filter_env_depth_min = -8000.0
filter_env_depth_max = 2000.0
filter_env_depth_scaling = linear

#==============================================================================
# POLYPHONIC SYNTHESIS
#==============================================================================

[polyphonic]
# ─────────────────────────────────────────────────────────────────────────────
# Voice Configuration
# ─────────────────────────────────────────────────────────────────────────────
# Number of simultaneous polyphonic voices (1-16)
# Higher values = more notes but higher CPU load
# Total oscillators = num_voices × max_oscillators
num_voices = 8

# Maximum oscillators per voice (1-256)
# Higher values = richer timbre but higher CPU load
# Each oscillator represents one harmonic/FFT bin
max_oscillators = 128

# Master volume for polyphonic mode (0.0-2.0)
# Controls overall output level
master_volume = 0.3

# ─────────────────────────────────────────────────────────────────────────────
# Harmonic Processing
# ─────────────────────────────────────────────────────────────────────────────
# Minimum audible amplitude threshold (0.0-1.0)
# Harmonics below this level are skipped for CPU optimization
min_audible_amplitude = 0.0001

# Amplitude gamma correction (0.1-5.0)
# Higher values = more emphasis on strong harmonics
amplitude_gamma = 1.5

# High frequency harmonic limit in Hz (100-10000)
# Frequencies above this use fewer harmonics to save CPU
high_freq_harmonic_limit_hz = 2000.0

# Maximum harmonics per voice (1-256)
# Limits CPU load for high notes
max_harmonics_per_voice = 64

# ─────────────────────────────────────────────────────────────────────────────
# Volume ADSR Envelope
# ─────────────────────────────────────────────────────────────────────────────
# Controls note amplitude over time
# Attack time in seconds (0.0-10.0) - time to reach full volume
volume_adsr_attack_s = 0.01
volume_adsr_attack_s_min = 0.001
volume_adsr_attack_s_max = 5.0
volume_adsr_attack_s_scaling = exponential

# Decay time in seconds (0.0-10.0) - time to reach sustain level
volume_adsr_decay_s = 0.1
volume_adsr_decay_s_min = 0.001
volume_adsr_decay_s_max = 5.0
volume_adsr_decay_s_scaling = exponential

# Sustain level (0.0-1.0) - volume while note is held
volume_adsr_sustain_level = 0.8
volume_adsr_sustain_level_min = 0.0
volume_adsr_sustain_level_max = 1.0
volume_adsr_sustain_level_scaling = linear

# Release time in seconds (0.0-10.0) - time to fade out after note off
volume_adsr_release_s = 0.5
volume_adsr_release_s_min = 0.001
volume_adsr_release_s_max = 10.0
volume_adsr_release_s_scaling = exponential

# ─────────────────────────────────────────────────────────────────────────────
# Filter ADSR Envelope
# ─────────────────────────────────────────────────────────────────────────────
# Controls spectral brightness over time
# Attack time in seconds (0.0-10.0)
filter_adsr_attack_s = 0.02
filter_adsr_attack_s_min = 0.001
filter_adsr_attack_s_max = 5.0
filter_adsr_attack_s_scaling = exponential

# Decay time in seconds (0.0-10.0)
filter_adsr_decay_s = 0.2
filter_adsr_decay_s_min = 0.001
filter_adsr_decay_s_max = 5.0
filter_adsr_decay_s_scaling = exponential

# Sustain level (0.0-1.0)
filter_adsr_sustain_level = 0.1
filter_adsr_sustain_level_min = 0.0
filter_adsr_sustain_level_max = 1.0
filter_adsr_sustain_level_scaling = linear

# Release time in seconds (0.0-10.0)
filter_adsr_release_s = 0.3
filter_adsr_release_s_min = 0.001
filter_adsr_release_s_max = 10.0
filter_adsr_release_s_scaling = exponential

# ─────────────────────────────────────────────────────────────────────────────
# Spectral Filter
# ─────────────────────────────────────────────────────────────────────────────
# Base cutoff frequency in Hz (20-20000)
# Controls the brightness of the sound
filter_cutoff_hz = 8000.0
filter_cutoff_hz_min = 20.0
filter_cutoff_hz_max = 20000.0
filter_cutoff_hz_scaling = logarithmic

# Filter envelope depth in Hz (-20000 to 20000)
# How much the filter ADSR modulates the cutoff frequency
# Positive = brighter attack, negative = darker attack
filter_env_depth_hz = -7800.0
filter_env_depth_hz_min = -10000.0
filter_env_depth_hz_max = 10000.0
filter_env_depth_hz_scaling = linear

# ─────────────────────────────────────────────────────────────────────────────
# LFO (Low Frequency Oscillator)
# ─────────────────────────────────────────────────────────────────────────────
# LFO rate in Hz (0.0-20.0)
# Controls vibrato speed
lfo_rate_hz = 0.0
lfo_rate_hz_min = 0.0
lfo_rate_hz_max = 20.0
lfo_rate_hz_scaling = linear

# LFO depth in semitones (-12.0 to 12.0)
# Controls vibrato intensity (pitch variation)
lfo_depth_semitones = 0.0
lfo_depth_semitones_min = 0.0
lfo_depth_semitones_max = 2.0
lfo_depth_semitones_scaling = linear

[synth_polyphonic]
# Mix level for polyphonic synthesis (0.0-1.0)
volume = 1.0
volume_min = 0.0
volume_max = 1.0
volume_scaling = linear

# Reverb send amount (0.0-1.0)
reverb_send = 0.2
reverb_send_min = 0.0
reverb_send_max = 1.0
reverb_send_scaling = linear

# Note control (MIDI-triggered)
note_on = 0.0
note_on_min = 0.0
note_on_max = 127.0
note_on_scaling = discrete
note_on_type = button

note_off = 0.0
note_off_min = 0.0
note_off_max = 127.0
note_off_scaling = discrete
note_off_type = button

#==============================================================================
# SEQUENCER PARAMETERS
#==============================================================================

[sequencer_global]
# Blending mode selector (0=MIX, 1=ADD, 2=SCREEN, 3=MASK)
blend_mode = 3.0
blend_mode_min = 0.0
blend_mode_max = 3.0
blend_mode_scaling = discrete

# Master tempo in BPM
master_tempo = 120.0
master_tempo_min = 40.0
master_tempo_max = 240.0
master_tempo_scaling = linear

# Quantization resolution
quantize_res = 4.0
quantize_res_min = 1.0
quantize_res_max = 16.0
quantize_res_scaling = discrete

[sequencer_player_defaults]
# Default values for all 5 sequencer players
# These are expanded to individual player parameters

# Transport Controls
record_toggle = 0.0
record_toggle_min = 0.0
record_toggle_max = 1.0
record_toggle_scaling = discrete
record_toggle_type = button

play_stop = 0.0
play_stop_min = 0.0
play_stop_max = 1.0
play_stop_scaling = discrete
play_stop_type = button

clear = 0.0
clear_min = 0.0
clear_max = 1.0
clear_scaling = discrete
clear_type = button

# Playback Parameters
speed = 1.0
speed_min = 0.1
speed_max = 4.0
speed_scaling = exponential

exposure = 0.5
exposure_min = 0.0
exposure_max = 1.0
exposure_scaling = linear

offset = 0.0
offset_min = 0.0
offset_max = 1.0
offset_scaling = linear

# ADSR Envelope
env_attack = 0.0
env_attack_min = 0.0
env_attack_max = 1.0
env_attack_scaling = linear

env_decay = 0.0
env_decay_min = 0.0
env_decay_max = 1.0
env_decay_scaling = linear

env_sustain = 1.0
env_sustain_min = 0.0
env_sustain_max = 1.0
env_sustain_scaling = linear

env_release = 0.0
env_release_min = 0.0
env_release_max = 1.0
env_release_scaling = linear

# Loop and Playback
loop_mode = 0.0
loop_mode_min = 0.0
loop_mode_max = 2.0
loop_mode_scaling = discrete

playback_direction = 0.0
playback_direction_min = 0.0
playback_direction_max = 1.0
playback_direction_scaling = discrete

# Image Processing
brightness = 1.0
brightness_min = 0.5
brightness_max = 2.0
brightness_scaling = linear

# Mix Controls
player_mix = 0.0
player_mix_min = 0.0
player_mix_max = 1.0
player_mix_scaling = linear

mix_enabled = 1.0
mix_enabled_min = 0.0
mix_enabled_max = 1.0
mix_enabled_scaling = discrete
mix_enabled_type = button

#==============================================================================
# SYSTEM PARAMETERS
#==============================================================================

[system]
# Freeze synth data
freeze = 0.0
freeze_min = 0.0
freeze_max = 1.0
freeze_scaling = discrete
freeze_type = button

# Resume synth data with fade
resume = 0.0
resume_min = 0.0
resume_max = 1.0
resume_scaling = discrete
resume_type = button
