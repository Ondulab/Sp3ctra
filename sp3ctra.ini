# Sp3ctra Configuration
# This file was automatically generated with default values
# Modify these values as needed - the program will validate them on startup

[audio]
# Audio system configuration - optimized for real-time synthesis
# Sampling frequency in Hz (48000, 96000)
sampling_frequency = 48000

# Audio buffer size in frames - affects latency and stability
# Smaller values = lower latency, larger values = more stable  
audio_buffer_size = 300

[auto_volume]
# Enable/disable IMU-based auto-volume (0=disabled, 1=enabled)
auto_volume_enabled = 1

# Timeout before switching to inactive mode (seconds)
imu_inactivity_timeout_s = 10

# Volume level when inactive (0.0-1.0)
auto_volume_inactive_level = 0.005

# Fade duration for volume transitions (ms)
auto_volume_fade_ms = 2000

# ========== Anti-Vibrations Acoustiques ==========
# GUIDE DE RÉGLAGE:
# 
# PROBLÈME : Le son ne s'arrête pas malgré l'immobilité ?
# → Augmentez vibration_protection_factor (essayez 4.0 ou 5.0)
#
# PROBLÈME : Le système ne détecte pas les mouvements lents ?
# → Diminuez imu_sensitivity (essayez 0.7 ou 0.5)
#
# PROBLÈME : Le système s'arrête trop facilement pendant le jeu ?
# → Augmentez imu_sensitivity (essayez 1.5 ou 2.0)

# Sensibilité générale de détection de mouvement (0.1 - 10.0)
# Valeurs basses = très sensible (détecte mouvements subtils)
# Valeurs hautes = peu sensible (nécessite mouvements francs)
# Recommandé : 1.0 (normal) / 2.0 (environnement bruyant) / 0.5 (très précis)
imu_sensitivity = 1.0

# Durcissement du seuil quand volume audio fort (1.0 - 5.0)
# Facteur multiplicateur appliqué au seuil quand volume élevé
# Valeurs basses = peu de protection contre vibrations
# Valeurs hautes = forte protection contre vibrations
# Recommandé : 3.0 (protection modérée) / 4.0 (forte protection)
vibration_protection_factor = 3.0

[synthesis]
# Base frequency for the first note (Hz)
start_frequency = 65.41

# Musical scale configuration
semitone_per_octave = 12
comma_per_semitone = 18

# Pixel to note mapping and intensity behavior
pixels_per_note = 2
# 0=bright pixels louder, 1=dark pixels louder
invert_intensity = 1

[envelope_slew]
# Base time constants for envelope slew (multiplied by runtime divisors)
# These values control how quickly volume changes occur
tau_up_base_ms = 0.500
tau_down_base_ms = 100.000

# Frequency-dependent release weighting (stabilizes highs vs lows)
# Helps balance volume transitions across different frequency ranges
decay_freq_ref_hz = 800.0
decay_freq_beta = -0.3

# Enable phase-weighted slew to minimize gain changes at waveform peaks
# This reduces audio artifacts by timing volume changes with the audio waveform
enable_phase_weighted_slew = 0

# Phase weighting parameters (applied per sample)
# Control how the phase weighting affects the slew behavior
phase_weight_power = 2.0

[stereo_processing]
# Enable/disable stereo mode (0=mono, 1=stereo)
stereo_mode_enabled = 1

# Controls global stereo intensity
stereo_temperature_amplification = 4.5

# Balance between color axes
stereo_blue_red_weight = 0.8
stereo_cyan_yellow_weight = 0.2

# Shape of response curve
stereo_temperature_curve_exponent = 1.0

[summation_normalization]
# Volume weighting exponent - LOWER values make strong oscillators dominate more
# Valid range: 0.01 to 10.0 (0.1 = strong domination, 1.0 = linear, 2.0+ = flattened)
volume_weighting_exponent = 0.3

# Final response curve exponent - HIGHER values = MORE compression
# Valid range: 0.1 to 3.0 (0.5 = expand, 1.0 = linear, 2.0+ = compress)
summation_response_exponent = 2.5

# Noise gate - suppresses weak signals (dust, background noise) BEFORE compression
# Valid range: 0.0 to 1.0 (relative to VOLUME_AMP_RESOLUTION)
# Lower values = more aggressive suppression, higher values = less suppression
noise_gate_threshold = 0.25

# Soft limiter - prevents hard clipping while preserving dynamics (applied AFTER normalization)
# Valid range: 0.0 to 1.0 (threshold before soft compression kicks in)
soft_limit_threshold = 0.8

# Soft limiter knee - controls smoothness of the compression transition
# Valid range: 0.0 to 1.0 (smaller = harder knee, larger = softer knee)
soft_limit_knee = 0.1

# Contrast processing - controls dynamic range based on image variance
# Lower values = more aggressive suppression of low-contrast (blurred) images
contrast_min = 0.05
contrast_stride = 1.5
contrast_adjustment_power = 0.25

[image_processing]
# Non-linear intensity mapping using gamma correction
# Enable/disable (0=disabled, 1=enabled)
enable_non_linear_mapping = 1

# Gamma value for intensity correction
# Valid range: 0.1 to 10.0 (1.0 = linear, <1.0 = expand shadows, >1.0 = compress shadows)
# Higher values create more aggressive compression of weak signals
gamma_value = 4.8
